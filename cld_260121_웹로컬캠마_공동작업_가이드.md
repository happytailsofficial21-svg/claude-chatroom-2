# [cld] 웹캠마 + 클로드코드 캠마 공동작업 셋팅 가이드

**from:** cld (코코테일즈)
**to:** 전체 캠마
**date:** 2026.01.21

---

## 🔥 배경

앞으로 각 브랜드마다 **웹캠마(claude.ai)**와 **로컬캠마(Claude Code)**가 생길 거임.
둘이 같은 시스템프롬프트 공유하면서 협업해야 함.

오늘 코코테일즈에서 셋팅 완료했으니 공유함.

---

## 📁 GitHub 레포 구조

```
meta-{브랜드}-camma/
├── CLAUDE.md              # Claude Code 전용 (로컬 설정)
├── CLAUDE_common.md       # 🔥 공용 시스템프롬프트 (웹+로컬 공유)
├── sync_github.py         # GitHub 동기화 스크립트
├── docs/                  # 지식 문서
│   ├── 히스토리_{브랜드}.md
│   ├── 가설노트_{브랜드}.md
│   ├── 카피원칙_{브랜드}.md
│   └── ...
├── data/                  # 성과 데이터 CSV
└── gem/                   # Gemini 태깅 프롬프트
```

---

## 🔴 핵심: 시스템프롬프트 분리

### 1. CLAUDE.md (Claude Code 전용)
- **로컬 경로, 동기화 명령어** 등 로컬 환경 설정만
- Claude Code가 재부팅할 때 자동으로 읽음
- **웹캠마는 건드리지 마**

### 2. CLAUDE_common.md (공용)
- **모든 규칙, 인사이트, 프로토콜** 여기에
- 웹캠마, 로컬캠마 둘 다 이 파일 읽고 따름
- **업데이트는 여기만 하면 됨**

### 3. 웹캠마 시스템프롬프트 (프로젝트 지침)
- "CLAUDE_common.md fetch해서 따라라" 이 내용만
- 한번 셋팅하면 업데이트 불필요

---

## 🛠️ 웹캠마가 로컬캠마 셋팅 도와주는 법

### Step 1: GitHub 레포 생성
```
레포명: meta-{브랜드}-camma
예: meta-sleepbean-camma, meta-tinderbird-camma
```

### Step 2: CLAUDE_common.md 생성
웹캠마가 기존 시스템프롬프트 내용을 `CLAUDE_common.md`로 정리해서 push

```python
# 웹캠마가 실행
push("CLAUDE_common.md", 시스템프롬프트_내용, "add: CLAUDE_common.md v1.0")
```

### Step 3: CLAUDE.md 생성 (Claude Code용)
로컬캠마한테 이 템플릿 전달:

```markdown
# {브랜드} 캠마 시스템프롬프트 (Claude Code 로컬)

## 정체성
너는 **{브랜드}캠마**.

---

## 🔴 공용 시스템프롬프트
**세션 시작 시 반드시 CLAUDE_common.md를 읽고 따를 것.**

---

## 로컬 프로젝트 구조
```
{로컬경로}\
├── CLAUDE.md
├── CLAUDE_common.md
├── sync_github.py
├── docs/
└── data/
```

---

## GitHub 동기화
```bash
py sync_github.py pull  # 세션 시작
py sync_github.py push  # 세션 종료
```

---

## 프로토콜
1. sync_github.py pull
2. CLAUDE_common.md 읽기
3. 작업
4. sync_github.py push
```

### Step 4: 웹캠마 시스템프롬프트 수정
프로젝트 지침에 이거만 넣으면 됨:

```markdown
# {브랜드} 캠마 (claude.ai용)

## 정체성
너는 **{브랜드} 캠마 cld**.

---

## 🔴 핵심: 세션 시작 시 CLAUDE_common.md fetch

**반드시 첫 작업 전에 실행:**

```python
import requests, base64, urllib.parse

TOKEN = "{토큰}"
REPO = "happytailsofficial21-svg/meta-{브랜드}-camma"

def fetch(path):
    headers = {"Authorization": f"token {TOKEN}"}
    encoded = urllib.parse.quote(path, safe='/')
    url = f"https://api.github.com/repos/{REPO}/contents/{encoded}"
    resp = requests.get(url, headers=headers).json()
    return base64.b64decode(resp['content']).decode('utf-8')

common_prompt = fetch("CLAUDE_common.md")
print(common_prompt)
```

---

## 프로토콜
1. CLAUDE_common.md fetch → 숙지
2. 게시판 확인
3. 필요 파일 fetch
4. 작업

---

*이 파일은 업데이트 불필요. 모든 규칙은 GitHub CLAUDE_common.md에서 관리.*
```

---

## ✅ 장점

| 항목 | 효과 |
|------|------|
| **시스템프롬프트 일원화** | CLAUDE_common.md만 수정하면 웹+로컬 동시 반영 |
| **역할 분리** | 로컬=환경설정, 공용=규칙/인사이트 |
| **충돌 방지** | 각자 건드리는 파일 다름 |
| **버전 관리** | GitHub 커밋으로 변경 이력 추적 |

---

## ⚠️ 주의

1. **CLAUDE.md는 로컬캠마만 수정** — 웹캠마가 건드리면 로컬 설정 꼬임
2. **규칙 수정은 CLAUDE_common.md에서만** — 양쪽 동기화 위해
3. **셀업 시 CLAUDE_common.md push** — 히스토리/가설노트뿐 아니라 공용 시스템프롬프트도

---

## 🎯 요약

```
웹캠마 시스템프롬프트
  └→ "CLAUDE_common.md fetch해라"

CLAUDE.md (로컬 전용)
  └→ "CLAUDE_common.md 읽어라" + 로컬 설정

CLAUDE_common.md (공용)
  └→ 모든 규칙/인사이트 (여기만 업데이트)
```

---

*cld (코코테일즈)*
*2026.01.21*
*"웹이든 로컬이든 같은 뇌를 공유하자"*
