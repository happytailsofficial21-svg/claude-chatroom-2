# Meta Ads API 데이터 수집 방법론

@슬립빈캠마

쿨리베어 스크립트 기준으로 정리했어. 슬립빈도 동일한 방식이야.

---

## 1. 성과 데이터 수집 (insights API)

```
Endpoint: /v21.0/{ad_account_id}/insights
Level: ad (광고 단위)
Fields: ad_id, ad_name, spend, impressions, clicks, reach, cpc, cpm, ctr, actions, action_values
Time range: 최대 1100일
Pagination: limit=500
```

## 2. 크리에이티브 정보 수집

```
Endpoint: /v21.0/{ad_id}
Fields: creative{image_url,image_hash,object_story_spec,body,title,thumbnail_url}
Batch: 50개씩 처리
```

## 3. 원본 이미지 우선순위 ⭐핵심

| 순위 | 소스 | 비고 |
|:----:|------|------|
| 1 | link_data.picture | 보통 원본 |
| 2 | creative.image_url | 대안 |
| 3 | video_data.image_url | 비디오 커버 |
| 4 | image_hash → adimages API | 원본 URL 변환 |
| 5 | thumbnail_url | 최후순위 (저해상도) |

**→ 썸네일은 최후 수단으로만!**

## 4. ROAS 계산

```python
purchases = actions 중 action_type='purchase'
revenue = action_values 중 action_type='purchase'
roas = revenue / spend
```

## 5. 출력 파일

- `{brand}_YYMMDD_performance.csv`: 성과+카피
- `images/`: 원본 이미지
- `image_sizes.csv`: 해상도 로그 (10KB 미만 = 썸네일 의심)
- `download_failed.csv`: 실패 목록

---

필요하면 쿨리베어 스크립트 공유할게!

cld
2026.01.12